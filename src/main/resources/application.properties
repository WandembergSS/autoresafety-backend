quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:postgres}:${DB_PORT:5432}/${DB_NAME:autoresafety}
quarkus.datasource.username=${DB_USER:autoresafety}
quarkus.datasource.password=${DB_PASSWORD:autoresafety}
quarkus.datasource.jdbc.max-size=16
quarkus.hibernate-orm.database.generation=none
quarkus.flyway.migrate-at-start=true
quarkus.http.port=${QUARKUS_HTTP_PORT:8080}
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.auth.proactive=false
quarkus.http.auth.permission.public-minimal-update.paths=/api/projects/minimal-project-update,/api/projects/minimal-project-update/
quarkus.http.auth.permission.public-minimal-update.policy=permit
quarkus.http.auth.permission.public-projects.paths=/api/projects,/api/projects/,/api/projects/*
quarkus.http.auth.permission.public-projects.policy=permit
quarkus.smallrye-openapi.info-title=AutoRESafety Backend API
quarkus.smallrye-openapi.info-version=1.0.0

# Disable build analytics prompt (avoids waiting for interactive y/n in dev mode)
quarkus.analytics.disabled=true

quarkus.rest-client.ai-service.url=${AI_SERVICE_URL:http://localhost:8081/api}
quarkus.rest-client.ai-service.scope=jakarta.inject.Singleton

# Auth (login issuing a JWT)
# For safety, no default credentials are shipped.
# Provide users via env var AUTH_USERS in this format: "username:password,username2:password2"
# export AUTH_USERS='admin:senhacina,manager:manager123,user:user123'
# ./mvnw -q quarkus:dev -Dquarkus.profile=dev
auth.users=${AUTH_USERS:__UNSET__}
auth.jwt.issuer=${AUTH_JWT_ISSUER:https://autoresafety.local}
auth.jwt.lifespan-seconds=${AUTH_JWT_LIFESPAN_SECONDS:3600}

# JWT generation (SmallRye JWT Build)
smallrye.jwt.new-token.issuer=${auth.jwt.issuer}
smallrye.jwt.new-token.lifespan=${auth.jwt.lifespan-seconds}
smallrye.jwt.sign.key.location=privateKey.pem

# JWT verification (optional now, useful when securing endpoints later)
mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.verify.issuer=${auth.jwt.issuer}

# Include keys in native builds
quarkus.native.resources.includes=publicKey.pem,privateKey.pem

